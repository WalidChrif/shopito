<!-- app/views/admin/dashboard/index.html.erb -->
<div class="container-fluid mt-4 p-4">
  <h1 class="display-4">Dashboard</h1>
  <hr class="my-4">
  <div class="row">
    <!-- Stats Cards -->
    <div class="col-md-4">
      <div class="card text-white bg-primary mb-3">
        <div class="card-body">
          <h5 class="card-title">Total Orders</h5>
          <h2><%= @total_sales %></h2>
        </div>
      </div>
    </div>
    
    <div class="col-md-4">
      <div class="card text-white bg-success mb-3">
        <div class="card-body">
          <h5 class="card-title">Total Revenue</h5>
          <h2>$<%= number_with_precision(@total_revenue, precision: 2) %></h2>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-white bg-info mb-3">
        <div class="card-body">
          <h5 class="card-title">Total Products</h5>
          <h2><%= @total_products %></h2>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-white bg-warning mb-3">
        <div class="card-body">
          <h5 class="card-title">Total Customers</h5>
          <h2><%= @total_customers %></h2>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-white bg-danger mb-3">
        <div class="card-body">
          <h5 class="card-title">Total Admins</h5>
          <h2><%= @total_admins %></h2>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Orders Table -->
  <div class="card mt-4">
    <div class="card-header">
      <h5>Recent Orders</h5>
    </div>
    <div class="card-body">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>ID</th>
            <th>Customer</th>
            <th>Total</th>
            <th>Status</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
          <% @orders.each do |order| %>
            <tr>
              <td>#<%= order.id %></td>
              <td><%= order.customer.try(:first_name) %></td>
              <td>$<%= number_with_precision(order.total_price, precision: 2) %></td>
              <td><span class="badge bg-<%= order.status == 'completed' ? 'success' : 'warning' %>">
                <%= order.status %>
              </span></td>
              <td><%= order.created_at.strftime("%b %d, %Y") %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Recent Customers Table -->
  <div class="card mt-4">
    <div class="card-header">
      <h5>Recent Customers</h5>
    </div>
    <div class="card-body">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Address</th>
          </tr>
        </thead>
        <tbody>
          <% @customers.each do |customer| %>
            <tr>
              <td>#<%= customer.id %></td>
              <td><%= customer.first_name %> <%= customer.last_name %></td>
              <td><%= customer.email %></td>
              <td><%= customer.phone %></td>
              <td><%= customer.address %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Recent Products Table -->
  <div class="card mt-4">
    <div class="card-header">
      <h5>Recent Products</h5>
    </div>
    <div class="card-body">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Category</th>
          </tr>
        </thead>
        <tbody>
          <% @products.each do |product| %>
            <tr>
              <td>#<%= product.id %></td>
              <td><%= product.title %></td>
              <td>$<%= number_with_precision(product.price, precision: 2) %></td>
              <td><%= product.stock %></td>
              <td><%= 'category' %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Recent Admins Table -->
  <div class="card mt-4">
    <div class="card-header">
      <h5>Recent Admins</h5>
    </div>
    <div class="card-body">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
          </tr>
        </thead>
        <tbody>
          <% @admins.each do |admin| %>
            <tr>
              <td>#<%= admin.id %></td>
              <td><%= admin.full_name %></td>
              <td><%= admin.email %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>